var VueScrollama=function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0?parseInt(t.substring(i+5,t.indexOf(".",i)),10):-1}function n(){n.init||(n.init=!0,s=-1!==e())}function i(t){t.component("resize-observer",a)}function o(t){o.installed||(o.installed=!0,t.component("Scrollama",h))}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var r=t(function(t,e){!function(e,n){t.exports=function(){function t(t){for(var e=t.length,n=[],i=0;i<e;i+=1)n.push(t[i]);return n}function e(t){return t instanceof Element?t:"string"==typeof t?document.querySelector(t):null}function n(e,n){return void 0===n&&(n=document),"string"==typeof e?t(n.querySelectorAll(e)):e instanceof Element?t([e]):e instanceof NodeList?t(e):e instanceof Array?e:[]}function i(t){return"scrollama__debug-step--"+t.id+"-"+t.i}function o(t){return"scrollama__debug-offset--"+t.id}function r(t){var e=t.id,n=t.offsetVal,i=t.stepClass,r=document.createElement("div");r.setAttribute("id",o({id:e})),r.setAttribute("class","scrollama__debug-offset"),r.style.position="fixed",r.style.left="0",r.style.width="100%",r.style.height="0px",r.style.borderTop="2px dashed black",r.style.zIndex="9999";var s=document.createElement("p");s.innerText='".'+i+'" trigger: '+n,s.style.fontSize="12px",s.style.fontFamily="monospace",s.style.color="black",s.style.margin="0",s.style.padding="6px",r.appendChild(s),document.body.appendChild(r)}function s(t){r({id:t.id,offsetVal:t.offsetVal,stepClass:t.stepEl[0].getAttribute("class")})}function a(t){var e=t.id,n=t.offsetMargin,i=(t.offsetVal,o({id:e}));document.querySelector("#"+i).style.top=n+"px"}function c(t){var e=t.id,n=(t.stepOffsetHeight,t.offsetMargin);t.offsetVal;a({id:e,offsetMargin:n})}function f(t){var e=t.id,n=t.index,o=t.state,r=i({id:e,i:n}),s=document.querySelector("#"+r+"_above"),a=document.querySelector("#"+r+"_below"),c="enter"===o?"block":"none";s&&(s.style.display=c),a&&(a.style.display=c)}function l(){function t(){var t="abcdefghijklmnopqrstuv",e=t.length,n=(new Date).getTime();return""+[0,0,0].map(function(n){return t[Math.floor(Math.random()*e)]}).join("")+n}function i(t){var e=0;if(t.offsetParent)do{e+=t.offsetTop,t=t.offsetParent}while(t);return e<0?0:e}function o(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)}function r(t){return+t.getAttribute("data-scrollama-index")}function a(){window.pageYOffset>st?at="down":window.pageYOffset<st&&(at="up"),st=window.pageYOffset}function l(){D=window.innerHeight,X=o(),K=F?F.getBoundingClientRect():null,q=N*D,G=W?W.map(function(t){return t.offsetHeight}):[],J=W?W.map(i):[],U&&Q&&A(),Z&&c({id:Y,stepOffsetHeight:G,offsetMargin:q,offsetVal:N})}function u(t){t&&!U?(Q&&A(),U=!0):t||(j.top&&j.top.disconnect(),j.bottom&&j.bottom.disconnect(),j.stepAbove&&j.stepAbove.forEach(function(t){return t.disconnect()}),j.stepBelow&&j.stepBelow.forEach(function(t){return t.disconnect()}),j.stepProgress&&j.stepProgress.forEach(function(t){return t.disconnect()}),j.viewportAbove&&j.viewportAbove.forEach(function(t){return t.disconnect()}),j.viewportBelow&&j.viewportBelow.forEach(function(t){return t.disconnect()}),U=!1)}function d(t){for(var e=Math.ceil(t/et),n=[],i=1/e,o=0;o<e;o++)n.push(o*i);return n}function p(t,e){if("above"===e)for(var n=0;n<t;n++){var i=ot[n];"enter"===i.state&&g(W[n],"down"),"up"===i.direction&&(h(W[n],"down",!1),g(W[n],"down"))}else if("below"===e)for(var o=ot.length-1;o>t;o--){var r=ot[o];"enter"===r.state&&g(W[o],"up"),"down"===r.direction&&(h(W[o],"up",!1),g(W[o],"up"))}}function h(t,e,n){void 0===n&&(n=!0);var i=r(t),o={element:t,index:i,direction:e};ot[i].direction=e,ot[i].state="enter",nt&&n&&"down"===e&&p(i,"above"),nt&&n&&"up"===e&&p(i,"below"),B.stepEnter&&"function"==typeof B.stepEnter&&!ct[i]&&(B.stepEnter(o,ot),Z&&f({id:Y,index:i,state:"enter"}),it&&(ct[i]=!0)),tt&&("down"===e?v(t,0):v(t,1))}function g(t,e){var n=r(t),i={element:t,index:n,direction:e};ot[n].direction=e,ot[n].state="exit",tt&&("down"===e?v(t,1):v(t,0)),B.stepExit&&"function"==typeof B.stepExit&&(B.stepExit(i,ot),Z&&f({id:Y,index:n,state:"exit"}))}function v(t,e){var n={element:t,index:r(t),progress:e};B.stepProgress&&"function"==typeof B.stepProgress&&B.stepProgress(n)}function m(){var t={direction:at};rt.direction=at,rt.state="enter",B.containerEnter&&"function"==typeof B.containerEnter&&B.containerEnter(t)}function b(){var t={direction:at};rt.direction=at,rt.state="exit",B.containerExit&&"function"==typeof B.containerExit&&B.containerExit(t)}function y(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.boundingClientRect,i=t.target,o=n.bottom,s=n.height,a=o-q,c=r(i),f=ot[c];a>=-$&&(e&&"down"===at&&"enter"!==f.state?h(i,at):e||"up"!==at||"enter"!==f.state?!e&&a>=s&&"down"===at&&"enter"===f.state&&g(i,at):g(i,at))})}function w(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.boundingClientRect,i=t.target,o=n.bottom,s=n.height,a=o-q,c=r(i),f=ot[c];a>=-$&&a<s&&e&&"up"===at&&"enter"!==f.state?h(i,at):a<=$&&!e&&"down"===at&&"enter"===f.state&&g(i,at)})}function _(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,i=r(n),o=ot[i];e&&"down"===at&&"enter"!==o.state&&"down"!==o.direction&&(h(n,"down"),g(n,"down"))})}function x(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.target,i=r(n),o=ot[i];e&&"up"===at&&"enter"!==o.state&&"up"!==o.direction&&(h(n,"up"),g(n,"up"))})}function E(t){a(),t.forEach(function(t){var e=t.isIntersecting,n=t.intersectionRatio,i=t.boundingClientRect,o=t.target,r=i.bottom-q;e&&r>=-$&&v(o,+n.toFixed(3))})}function O(t){a();var e=t[0],n=e.isIntersecting,i=e.boundingClientRect;i.top;i.bottom>-$&&(n?m(at):"enter"===rt.state&&b(at))}function T(t){a();var e=t[0],n=e.isIntersecting;e.boundingClientRect.top<$&&(n?m(at):"enter"===rt.state&&b(at))}function k(){j.top&&j.top.unobserve(V);var t={root:null,rootMargin:D+"px 0px -"+D+"px 0px",threshold:0};j.top=new IntersectionObserver(O,t),j.top.observe(V)}function M(){j.bottom&&j.bottom.unobserve(V);var t={root:null,rootMargin:"-"+K.height+"px 0px "+K.height+"px 0px",threshold:0};j.bottom=new IntersectionObserver(T,t),j.bottom.observe(V)}function R(){j.stepAbove&&j.stepAbove.forEach(function(t){return t.disconnect()}),j.stepAbove=W.map(function(t,e){var n={root:null,rootMargin:G[e]+"px 0px "+(-D+q)+"px 0px",threshold:0},i=new IntersectionObserver(y,n);return i.observe(t),i})}function S(){j.stepBelow&&j.stepBelow.forEach(function(t){return t.disconnect()}),j.stepBelow=W.map(function(t,e){var n={root:null,rootMargin:-q+"px 0px "+(X-D+G[e]+q)+"px 0px",threshold:0},i=new IntersectionObserver(w,n);return i.observe(t),i})}function H(){j.viewportAbove&&j.viewportAbove.forEach(function(t){return t.disconnect()}),j.viewportAbove=W.map(function(t,e){var n={root:null,rootMargin:J[e]+"px 0px "+-(D-q+G[e])+"px 0px",threshold:0},i=new IntersectionObserver(_,n);return i.observe(t),i})}function z(){j.viewportBelow&&j.viewportBelow.forEach(function(t){return t.disconnect()}),j.viewportBelow=W.map(function(t,e){var n={root:null,rootMargin:-(q+G[e])+"px 0px "+(X-J[e]-G[e]-q)+"px 0px",threshold:0},i=new IntersectionObserver(x,n);return i.observe(t),i})}function C(){j.stepProgress&&j.stepProgress.forEach(function(t){return t.disconnect()}),j.stepProgress=W.map(function(t,e){var n={root:null,rootMargin:G[e]-q+"px 0px "+(-D+q)+"px 0px",threshold:d(G[e])},i=new IntersectionObserver(E,n);return i.observe(t),i})}function A(){H(),z(),R(),S(),tt&&C(),V&&F&&(k(),M())}function P(){W.forEach(function(t,e){return t.setAttribute("data-scrollama-index",e)})}function L(){ot=W.map(function(){return{direction:null,state:null}}),rt={direction:null,state:null}}function I(){Z&&s({id:Y,stepEl:W,offsetVal:N})}var $=1,B={},j={},V=null,F=null,W=null,Y=null,N=0,q=0,D=0,X=0,G=null,J=null,K=null,Q=!1,U=!1,Z=!1,tt=!1,et=0,nt=!1,it=!1,ot=null,rt=null,st=-1,at=null,ct=[],ft={};return ft.setup=function(i){var o=i.container,r=i.graphic,s=i.step,a=i.offset;void 0===a&&(a=.5);var c=i.progress;void 0===c&&(c=!1);var f=i.threshold;void 0===f&&(f=4);var d=i.debug;void 0===d&&(d=!1);var p=i.order;void 0===p&&(p=!0);var h=i.once;return void 0===h&&(h=!1),Y=t(),W=n(s),V=o?e(o):null,F=r?e(r):null,W.length?(Z=d,tt=c,nt=p,it=h,ft.offsetTrigger(a),et=Math.max(1,+f),Q=!0,I(),P(),L(),l(),u(!0),ft):(console.error("scrollama error: no step elements"),ft)},ft.resize=function(){return l(),ft},ft.enable=function(){return u(!0),ft},ft.disable=function(){return u(!1),ft},ft.destroy=function(){u(!1),Object.keys(B).forEach(function(t){return B[t]=null}),Object.keys(j).forEach(function(t){return j[t]=null})},ft.offsetTrigger=function(t){return t&&!isNaN(t)?(N=Math.min(Math.max(0,t),1),ft):N},ft.onStepEnter=function(t){return B.stepEnter=t,ft},ft.onStepExit=function(t){return B.stepExit=t,ft},ft.onStepProgress=function(t){return B.stepProgress=t,ft},ft.onContainerEnter=function(t){return B.containerEnter=t,ft},ft.onContainerExit=function(t){return B.containerExit=t,ft},ft}return l}()}()}),s=void 0,a={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"resize-observer",attrs:{tabindex:"-1"}})},staticRenderFns:[],_scopeId:"data-v-b329ee4c",name:"resize-observer",methods:{notify:function(){this.$emit("notify")},addResizeHandlers:function(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.notify),this._w===this.$el.offsetWidth&&this._h===this.$el.offsetHeight||this.notify()},removeResizeHandlers:function(){this._resizeObject&&this._resizeObject.onload&&(!s&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.notify),delete this._resizeObject.onload)}},mounted:function(){var t=this;n(),this.$nextTick(function(){t._w=t.$el.offsetWidth,t._h=t.$el.offsetHeight});var e=document.createElement("object");this._resizeObject=e,e.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",s&&this.$el.appendChild(e),e.data="about:blank",s||this.$el.appendChild(e)},beforeDestroy:function(){this.removeResizeHandlers()}},c={version:"0.4.4",install:i},f=null;"undefined"!=typeof window?f=window.Vue:"undefined"!=typeof global&&(f=global.Vue),f&&f.use(c);var l=t(function(t){!function(e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function r(t){return parseFloat(t)||0}function s(t){for(var e=0;t;)e+=t.offsetTop,t=t.offsetParent;return e}function a(){function t(){e.pageXOffset!=p.left?(p.top=e.pageYOffset,p.left=e.pageXOffset,v.refreshAll()):e.pageYOffset!=p.top&&(p.top=e.pageYOffset,p.left=e.pageXOffset,h.forEach(function(t){return t._recalcPosition()}))}function i(){r=setInterval(function(){h.forEach(function(t){return t._fastCheck()})},500)}function o(){clearInterval(r)}if(!u){u=!0,t(),e.addEventListener("scroll",t),e.addEventListener("resize",v.refreshAll),e.addEventListener("orientationchange",v.refreshAll);var r=void 0,s=void 0,a=void 0;"hidden"in n?(s="hidden",a="visibilitychange"):"webkitHidden"in n&&(s="webkitHidden",a="webkitvisibilitychange"),a?(n[s]||i(),n.addEventListener(a,function(){n[s]?o():i()})):i()}}var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=!1,l=void 0!==e;l&&e.getComputedStyle?function(){var t=n.createElement("div");["","-webkit-","-moz-","-ms-"].some(function(e){try{t.style.position=e+"sticky"}catch(t){}return""!=t.style.position})&&(f=!0)}():f=!0;var u=!1,d="undefined"!=typeof ShadowRoot,p={top:null,left:null},h=[],g=function(){function t(e){if(i(this,t),!(e instanceof HTMLElement))throw new Error("First argument must be HTMLElement");if(h.some(function(t){return t._node===e}))throw new Error("Stickyfill is already applied to this node");this._node=e,this._stickyMode=null,this._active=!1,h.push(this),this.refresh()}return c(t,[{key:"refresh",value:function(){if(!f&&!this._removed){this._active&&this._deactivate();var t=this._node,i=getComputedStyle(t),a={position:i.position,top:i.top,display:i.display,marginTop:i.marginTop,marginBottom:i.marginBottom,marginLeft:i.marginLeft,marginRight:i.marginRight,cssFloat:i.cssFloat};if(!isNaN(parseFloat(a.top))&&"table-cell"!=a.display&&"none"!=a.display){this._active=!0;var c=t.style.position;"sticky"!=i.position&&"-webkit-sticky"!=i.position||(t.style.position="static");var l=t.parentNode,u=d&&l instanceof ShadowRoot?l.host:l,p=t.getBoundingClientRect(),h=u.getBoundingClientRect(),g=getComputedStyle(u);this._parent={node:u,styles:{position:u.style.position},offsetHeight:u.offsetHeight},this._offsetToWindow={left:p.left,right:n.documentElement.clientWidth-p.right},this._offsetToParent={top:p.top-h.top-r(g.borderTopWidth),left:p.left-h.left-r(g.borderLeftWidth),right:-p.right+h.right-r(g.borderRightWidth)},this._styles={position:c,top:t.style.top,bottom:t.style.bottom,left:t.style.left,right:t.style.right,width:t.style.width,marginTop:t.style.marginTop,marginLeft:t.style.marginLeft,marginRight:t.style.marginRight};var v=r(a.top);this._limits={start:p.top+e.pageYOffset-v,end:h.top+e.pageYOffset+u.offsetHeight-r(g.borderBottomWidth)-t.offsetHeight-v-r(a.marginBottom)};var m=g.position;"absolute"!=m&&"relative"!=m&&(u.style.position="relative"),this._recalcPosition();var b=this._clone={};b.node=n.createElement("div"),o(b.node.style,{width:p.right-p.left+"px",height:p.bottom-p.top+"px",marginTop:a.marginTop,marginBottom:a.marginBottom,marginLeft:a.marginLeft,marginRight:a.marginRight,cssFloat:a.cssFloat,padding:0,border:0,borderSpacing:0,fontSize:"1em",position:"static"}),l.insertBefore(b.node,t),b.docOffsetTop=s(b.node)}}}},{key:"_recalcPosition",value:function(){if(this._active&&!this._removed){var t=p.top<=this._limits.start?"start":p.top>=this._limits.end?"end":"middle";if(this._stickyMode!=t){switch(t){case"start":o(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:this._offsetToParent.top+"px",bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"middle":o(this._node.style,{position:"fixed",left:this._offsetToWindow.left+"px",right:this._offsetToWindow.right+"px",top:this._styles.top,bottom:"auto",width:"auto",marginLeft:0,marginRight:0,marginTop:0});break;case"end":o(this._node.style,{position:"absolute",left:this._offsetToParent.left+"px",right:this._offsetToParent.right+"px",top:"auto",bottom:0,width:"auto",marginLeft:0,marginRight:0})}this._stickyMode=t}}}},{key:"_fastCheck",value:function(){this._active&&!this._removed&&(Math.abs(s(this._clone.node)-this._clone.docOffsetTop)>1||Math.abs(this._parent.node.offsetHeight-this._parent.offsetHeight)>1)&&this.refresh()}},{key:"_deactivate",value:function(){var t=this;this._active&&!this._removed&&(this._clone.node.parentNode.removeChild(this._clone.node),delete this._clone,o(this._node.style,this._styles),delete this._styles,h.some(function(e){return e!==t&&e._parent&&e._parent.node===t._parent.node})||o(this._parent.node.style,this._parent.styles),delete this._parent,this._stickyMode=null,this._active=!1,delete this._offsetToWindow,delete this._offsetToParent,delete this._limits)}},{key:"remove",value:function(){var t=this;this._deactivate(),h.some(function(e,n){if(e._node===t._node)return h.splice(n,1),!0}),this._removed=!0}}]),t}(),v={stickies:h,Sticky:g,forceSticky:function(){f=!1,a(),this.refreshAll()},addOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}for(var e=0;e<h.length;e++)if(h[e]._node===t)return h[e];return new g(t)},add:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length){for(var e=[],n=0;n<t.length;n++){(function(n){var i=t[n];i instanceof HTMLElement?h.some(function(t){if(t._node===i)return e.push(t),!0})||e.push(new g(i)):e.push(void 0)})(n)}return e}},refreshAll:function(){h.forEach(function(t){return t.refresh()})},removeOne:function(t){if(!(t instanceof HTMLElement)){if(!t.length||!t[0])return;t=t[0]}h.some(function(e){if(e._node===t)return e.remove(),!0})},remove:function(t){if(t instanceof HTMLElement&&(t=[t]),t.length)for(var e=0;e<t.length;e++)!function(e){var n=t[e];h.some(function(t){if(t._node===n)return t.remove(),!0})}(e)},removeAll:function(){for(;h.length;)h[0].remove()}};f||a(),t.exports?t.exports=v:l&&(e.Stickyfill=v)}(window,document)}),u={name:"Scrollama",components:{ResizeObserver:a},props:{id:{type:String,validator:function(t){return!/\s/.test(t)},default:function(){return Math.random().toString(36).substr(2,9)}}},mounted:function(){var t=this;l.add(this.$refs["scrollama-graphic"]),this.scroller=r();var e=Object.assign({},this.$attrs,{step:"#scrollama-steps-"+this.id+">div",container:"#scrollama-container-"+this.id,graphic:"#scrollama-graphic-"+this.id});this.scroller.setup(e),this.$listeners["step-progress"]&&this.scroller.onStepProgress(function(e){t.$emit("step-progress",e)}),this.$listeners["step-enter"]&&this.scroller.onStepEnter(function(e){t.$emit("step-enter",e)}),this.$listeners["step-exit"]&&this.scroller.onStepExit(function(e){t.$emit("step-exit",e)}),this.$listeners["container-enter"]&&this.scroller.onContainerEnter(function(e){t.$emit("container-enter",e)}),this.$listeners["container-exit"]&&this.scroller.onContainerExit(function(e){t.$emit("container-exit",e)}),this.handleResize()},methods:{handleResize:function(){this.scroller.resize()}}},d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scrollama-container",class:{"with-graphic":t.$slots.graphic},attrs:{id:"scrollama-container-"+t.id}},[n("div",{ref:"scrollama-graphic",staticClass:"scrollama-graphic",attrs:{id:"scrollama-graphic-"+t.id}},[t._t("graphic")],2),t._v(" "),n("div",{staticClass:"scrollama-steps",attrs:{id:"scrollama-steps-"+t.id}},[t._t("default")],2),t._v(" "),n("resize-observer",{on:{notify:t.handleResize}})],1)},p=[];d._withStripped=!0;var h=function(t,e,n,i,o,r,s,a){var c=("function"==typeof n?n.options:n)||{};return c.__file="/private/var/www/vue-scrollama/src/Scrollama.vue",c.render||(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0,o&&(c.functional=!0)),c._scopeId=i,c}({render:d,staticRenderFns:p},void 0,u,void 0,!1,void 0,void 0,void 0),g={install:o},v=null;return"undefined"!=typeof window?v=window.Vue:"undefined"!=typeof global&&(v=global.Vue),v&&v.use(g),h}();
